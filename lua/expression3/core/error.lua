--[[
	*****************************************************************************************************************************************************
		create a new extention
	*****************************************************************************************************************************************************
]]--
	
	local extension = EXPR_LIB.RegisterExtension("error");

--[[
	*****************************************************************************************************************************************************
		register error class
	*****************************************************************************************************************************************************
]]--
	
	local function notnil(obj)
		return obj ~= nil and obj ~= _nil
	end

	local class_error = extension:RegisterClass("er", {"error"}, istable, notnil);

--[[
	*****************************************************************************************************************************************************
		error constructor
	*****************************************************************************************************************************************************
]]--

	extension:RegisterConstructor("er", "s", function(ctx, msg)
		local err = {};
		err.state = "runtime";
		err.char = 0;
		err.line = 0;
		err.msg = msg;
		err.ctx = ctx;
		return err;
	end);
	

--[[
	*****************************************************************************************************************************************************
		Error methods
	*****************************************************************************************************************************************************
]]--
	
	extension:RegisterMethod("er", "message", "", "s", 1, function(err)
		return err and err.msg or "n/a";
	end, true);

	extension:RegisterMethod("er", "char", "", "n", 1, function(err)
		return err and err.char or 0;
	end, true);

	extension:RegisterMethod("er", "line", "", "n", 1, function(err)
		return err and err.line or 0;
	end, true);

--[[
	*****************************************************************************************************************************************************
		
	*****************************************************************************************************************************************************
]]--

extension:EnableExtension();











